<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AniType - Animated Letter Composer</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app-container">
    <!-- Export Controls - Fixed Top Right -->
    <div class="export-controls">
      <button id="export-webm-btn" class="btn btn-webm" disabled>
        üíæ Export WebM
      </button>

      <button id="export-prores-btn" class="btn btn-success" disabled>
        üíæ Export ProRes
      </button>
      
      <button id="export-hevc-btn" class="btn btn-secondary" disabled>
        üíæ Export HEVC
      </button>

      <button id="export-dxv-btn" class="btn btn-purple" disabled>
        üíæ Export DXV
      </button>

      <!-- Export Progress -->
      <div id="export-progress" class="export-progress hidden">
        <div class="progress-info">
          <span id="export-status">Exporting...</span>
          <span id="export-percent">0%</span>
        </div>
        <div class="progress-bar-container">
          <div id="export-progress-bar" class="progress-bar"></div>
        </div>
      </div>
    </div>

    <!-- Sidebar - Control Panel -->
    <aside class="sidebar">
      <!-- Header -->
      <div class="sidebar-header">
        <h1 class="app-title">Letter Composer</h1>
        <p class="app-subtitle">Animated text from sequences</p>
      </div>

      <!-- Source Files Section -->
      <section class="sidebar-section">
        <div class="section-content">
          <label class="section-label">Source Files</label>
          
          <label class="file-upload-area" for="file-input">
            <div class="upload-icon">üìÅ</div>
            <div class="upload-text">Drop files or folders here</div>
            <div class="upload-hint">WebM, PNG sequences, or font packs</div>
            <input
              type="file"
              id="file-input"
              multiple
              webkitdirectory
              directory
              accept="video/webm,.webm,image/png,image/jpeg"
              style="display: none;"
            />
          </label>

          <div id="upload-progress" class="upload-progress hidden">
            <div class="progress-info">
              <span>Loading files...</span>
              <span><span id="progress-current">0</span>/<span id="progress-total">0</span></span>
            </div>
            <div class="progress-bar-container">
              <div id="progress-bar" class="progress-bar"></div>
            </div>
          </div>

          <div id="font-packs-display" class="font-packs-display hidden">
            <div class="library-label">Font Packs</div>
            <div id="font-packs-list" class="font-packs-list"></div>
          </div>

          <div id="library-display" class="library-display hidden">
            <div class="library-label">Loaded Letters (<span id="library-count">0</span>)</div>
            <div id="library-letters" class="library-letters"></div>
          </div>
        </div>
      </section>

      <!-- Text Input Section -->
      <section class="sidebar-section">
        <div class="section-content">
          <label class="section-label">Text Content</label>
          <textarea
            id="text-input"
            rows="4"
            class="text-input"
            placeholder="Enter text (use Enter for new lines)..."
          >AniType</textarea>
        </div>
      </section>

      <!-- Timing Settings -->
      <section class="sidebar-section">
        <button class="section-toggle" data-section="timing">
          <span class="section-label">Animation Timing</span>
          <span class="toggle-icon">‚ñº</span>
        </button>
        
        <div id="timing-section" class="section-content">
          <div class="form-group">
            <label class="form-label">Timing Mode</label>
            <select id="timing-mode" class="form-select">
              <option value="simultaneous" selected>Simultaneous</option>
              <option value="stagger">Stagger</option>
            </select>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Stagger (frames)</label>
              <input type="number" id="stagger-frames" value="6" class="form-input" disabled>
            </div>

            <div class="form-group">
              <label class="form-label">Duration Mode</label>
              <select id="duration-mode" class="form-select">
                <option value="auto" selected>Auto (Longest)</option>
                <option value="custom">Custom</option>
              </select>
            </div>
          </div>

          <div id="custom-duration-group" class="form-group" style="display: none;">
            <label class="form-label">Custom Duration</label>
            <div class="form-row">
              <input type="number" id="custom-duration-value" value="1" step="0.1" class="form-input">
              <select id="duration-unit" class="form-select">
                <option value="seconds">Seconds</option>
                <option value="frames">Frames</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">FPS</label>
            <input type="number" id="fps" value="30" class="form-input">
          </div>

          <label class="checkbox-label">
            <input type="checkbox" id="hold-last-frame" checked class="checkbox">
            Hold last frame
          </label>
        </div>
      </section>

      <!-- Spacing Settings -->
      <section class="sidebar-section">
        <button class="section-toggle" data-section="spacing">
          <span class="section-label">Layout & Spacing</span>
          <span class="toggle-icon">‚ñº</span>
        </button>
        
        <div id="spacing-section" class="section-content">
          <div class="form-group">
            <label class="form-label">Alignment</label>
            <select id="alignment" class="form-select">
              <option value="left">Left</option>
              <option value="center" selected>Center</option>
              <option value="baseline">Baseline</option>
            </select>
          </div>

          <div class="form-row-3">
            <div class="form-group">
              <label class="form-label">Letter</label>
              <input type="number" id="spacing" value="12" class="form-input">
            </div>

            <div class="form-group">
              <label class="form-label">Char</label>
              <input type="number" id="char-spacing" value="0" class="form-input">
            </div>

            <div class="form-group">
              <label class="form-label">Line</label>
              <input type="number" id="line-spacing" value="24" class="form-input">
            </div>
          </div>
        </div>
      </section>

              <!-- Export Settings -->
      <section class="sidebar-section">
        <button class="section-toggle" data-section="export">
          <span class="section-label">Export Info</span>
          <span class="toggle-icon">‚ñ∂</span>
        </button>
        
        <div id="export-section" class="section-content hidden">
          <div id="ffmpeg-status" class="info-box">
            <div class="info-label">FFmpeg Status</div>
            <p id="ffmpeg-status-text" class="info-text">Checking FFmpeg...</p>
          </div>
          
          <div class="format-info">
            <strong>WebM (VP9):</strong> Browser-native, alpha support, good compression<br>
            <strong>ProRes 4444:</strong> Professional, max quality, large files<br>
            <strong>HEVC:</strong> Modern codec, good compression, alpha support<br>
            <strong>DXV:</strong> Optimized for Resolume, hardware accelerated
          </div>
        </div>
      </section>

      <!-- Spacer -->
      <div class="spacer"></div>

      <!-- Control Buttons -->
      <div class="control-buttons">
        <div class="button-row">
          <button id="play-btn" class="btn btn-primary" disabled>
            <span id="play-icon">‚ñ∂</span> <span id="play-text">Play</span>
          </button>
          <button id="reset-btn" class="btn btn-secondary" disabled>
            üîÑ Reset
          </button>
        </div>
      </div>
    </aside>

    <!-- Main Preview Area -->
    <main class="main-content">
      <!-- Top Bar -->
      <div class="top-bar">
        <div class="status-info">
          <span id="status-text">No content - Load letters and enter text</span>
        </div>
        
        <div id="playing-indicator" class="playing-indicator hidden">
          PLAYING
        </div>
      </div>

      <!-- Canvas Area -->
      <div class="canvas-area">
        <div id="canvas-container" class="canvas-container hidden">
          <canvas id="canvas"></canvas>
        </div>
        
        <div id="empty-state" class="empty-state">
          <div class="empty-icon">üé¨</div>
          <p class="empty-title">No Preview Available</p>
          <p class="empty-subtitle">Upload letter assets and enter text to begin</p>
        </div>
      </div>
    </main>
  </div>

  <script src="app.js"></script>
</body>
</html>